il.waiter={type:'waiter',count:0,timer:null,init:function(a){this.type=a?a:this.type,'waiter'==this.type?$('body').append('<div id="srag_waiter" class="srag_waiter"></div>'):$('body').append('<div id="srag_waiter" class="srag_waiter_percentage"><div class="progress" ><div id="srag_waiter_progress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><div id="srag_waiter_progress_text" class="progress-bar-text"></div></div></div></div>')},show:function(){0==this.count&&(this.timer=setTimeout(function(){$('#srag_waiter').show()},10)),++this.count},reinit:function(a){var a=a?a:this.type;this.count=0,$('#srag_waiter').attr('id','srag_waiter2'),this.init(a),$('#srag_waiter2').remove()},hide:function(){--this.count,0==this.count&&(window.clearTimeout(this.timer),$('#srag_waiter').fadeOut(200),this.resetProgress())},setPercentage:function(a){$('#srag_waiter_progress').css('width',a+'%').attr('aria-valuenow',a)},setBytes:function(a,b){this.setPercentage(100*(a/b));let c=this.humanFileSize(a,!0),d=this.humanFileSize(b,!0);c===d&&(c=this.humanFileSize(a,!0,3),d=this.humanFileSize(b,!0,3)),$('#srag_waiter_progress_text').text(c+' / '+d)},resetProgress:function(){this.setPercentage(0),$('#srag_waiter_progress_text').text('')},addListener:function(a){var b=this;$(document).ready(function(){$(a).on('click',function(){b.show()})})},addLinkOverlay:function(a){var b=this;$(document).ready(function(){$(a).on('click',function(a){a.preventDefault(),b.show();var c=$(this).attr('href');setTimeout(function(){document.location.href=c},1e3)})})},humanFileSize:function(a,b=!1,c=1){var d=Math.abs;const e=b?1e3:1024;if(d(a)<e)return a+' B';const f=b?['kB','MB','GB','TB','PB','EB','ZB','YB']:['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];let g=-1;const h=10**c;do a/=e,++g;while(Math.round(d(a)*h)/h>=e&&g<f.length-1);return a.toFixed(c)+' '+f[g]}};
